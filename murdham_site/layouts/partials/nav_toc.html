{{ $page := .page }}
<aside class="side-nav">
  <details open>
    <summary>On this page</summary>
    <nav>
      <ul>
        {{ range .TableOfContents }}
          {{- $attrs := dict "href" .RelPermalink "class" "secondary" }}
          {{- if eq $page . }}
            {{- $attrs = merge $attrs (dict "class" "active" "aria-current" "page") }}
          {{- end }}
          <li>
            <a
              {{- range $k, $v := $attrs }}
                {{- with $v }}
                  {{- printf " %s=%q" $k $v | safeHTMLAttr }}
                {{- end }}
              {{- end -}}
            >
              {{ .LinkTitle }}
            </a>
          </li>
        {{ end }}
      </ul>
    </nav>
  </details>
</aside>
